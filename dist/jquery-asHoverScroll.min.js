/*! jQuery asHoverScroll - v0.1.0 - 2015-03-08
* https://github.com/amazingSurge/jquery-asHoverScroll
* Copyright (c) 2015 amazingSurge; Licensed GPL */
!function(a){"use strict";var b="asHoverScroll",c=0,d=a[b]=function(b,e){this.element=b,this.$element=a(b),this.options=a.extend({},d.defaults,e,this.$element.data()),this.$list=a(this.options.list,this.$element),this.classes={disabled:this.options.namespace+"-disabled"},"vertical"===this.options.direction?this.attributes={page:"pageY",axis:"Y",position:"top",length:"height",offset:"offsetTop",client:"clientY",clientLength:"clientHeight"}:"horizontal"===this.options.direction&&(this.attributes={page:"pageX",axis:"X",position:"left",length:"width",offset:"offsetLeft",client:"clientX",clientLength:"clientWidth"}),this.instanceId=++c,this.disabled=!1,this._trigger("init"),this.init()};d.defaults={namespace:b,list:"> ul",item:"> li",exception:null,direction:"vertical",mousemove:!0,touchmove:!0,pointermove:!0,useCssTransforms:!0,useCssTransforms3d:!0,throttle:20,onEnter:function(){a(this).siblings().removeClass("is-active"),a(this).addClass("is-active")},onLeave:function(){a(this).removeClass("is-active")}};var e={};d.support=e,function(b){function c(b,c){var d=!1,g=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+f.join(g+" ")+g).split(" "),function(a,b){return void 0!==e[b]?(d=c?b:!0,!1):void 0}),d}function d(a){return c(a,!0)}var e=a("<support>").get(0).style,f=["webkit","Moz","O","ms"],g={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},h={csstransforms:function(){return!!c("transform")},csstransforms3d:function(){return!!c("perspective")},csstransitions:function(){return!!c("transition")},cssanimations:function(){return!!c("animation")}};h.csstransitions()&&(b.transition=new String(d("transition")),b.transition.end=g.transition.end[b.transition]),h.cssanimations()&&(b.animation=new String(d("animation")),b.animation.end=g.animation.end[b.animation]),h.csstransforms()&&(b.transform=new String(d("transform")),b.transform3d=h.csstransforms3d()),b.touch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?!0:!1,b.pointer=window.PointerEvent||window.MSPointerEvent?!0:!1,b.convertMatrixToArray=function(a){return a&&"matrix"==a.substr(0,6)?a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1},b.prefixPointerEvent=function(a){return window.MSPointerEvent?"MSPointer"+a.charAt(9).toUpperCase()+a.substr(10):a}}(e),d.prototype={constructor:d,init:function(){this.initPosition(),this.updateLength(),this.bindEvents()},bindEvents:function(){var b=this,c=[],d=[];this.options.mousemove&&(this.$element.on(this.eventName("mousemove"),a.proxy(this.onMove,this)),c.push("mouseenter"),d.push("mouseleave")),this.options.touchmove&&(this.$element.on(this.eventName("touchmove touchend touchstart"),a.proxy(this.onMove,this)),c.push("touchstart"),d.push("touchend")),this.options.pointermove&&(this.$element.on(this.eventName(e.prefixPointerEvent("pointermove")),a.proxy(this.onMove,this)),c.push(e.prefixPointerEvent("pointerdown")),d.push(e.prefixPointerEvent("pointerup"))),this.$list.on(this.eventName(c.join(" ")),this.options.item,function(){b.options.onEnter.call(this)}),this.$list.on(this.eventName(d.join(" ")),this.options.item,function(){b.options.onLeave.call(this)}),a(window).on(this.eventNameWithId("orientationchange"),function(){b.update.call(b)}),a(window).on(this.eventNameWithId("resize"),this.throttle(function(){b.update.call(b)},this.options.throttle))},unbindEvents:function(){this.$element.off(this.eventName()),this.$list.off(this.eventName()),a(window).off(this.eventNameWithId())},onMove:function(a){if(a=a.originalEvent||a||window.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,this.isMatchScroll(a)){var b;b=a[this.attributes.page]?a[this.attributes.page]:a[this.attributes.client];var c=(this.element[this.attributes.offset]-b)*this.multiplier;this.updatePosition(c)}},isMatchScroll:function(b){return!this.disabled&&this.canScroll()?this.options.exception?0===a(b.target).closest(this.options.exception).length?!0:!1:!0:!1},canScroll:function(){return this.listLength>this.containerLength},getContainerLength:function(){return this.element[this.attributes.clientLength]},getListhLength:function(){return this.$list[0][this.attributes.clientLength]},updateLength:function(){this.containerLength=this.getContainerLength(),this.listLength=this.getListhLength(),this.multiplier=(this.listLength-this.containerLength)/this.containerLength},initPosition:function(){var a=this.makePositionStyle(0);this.$list.css(a)},getPosition:function(){var a;if(this.options.useCssTransforms&&e.transform){if(a=e.convertMatrixToArray(this.options.useCssTransforms3d&&e.transform3d?this.$list.css(e.transform):this.$list.css(e.transform)),!a)return 0;a="X"===this.attributes.axis?a[12]||a[4]:a[13]||a[5]}else a=this.$list.css(this.attributes.position)},makePositionStyle:function(a){var b,c="0px",d="0px";this.options.useCssTransforms&&e.transform?("X"===this.attributes.axis?c=a+"px":d=a+"px",b=e.transform.toString(),a=this.options.useCssTransforms3d&&e.transform3d?"translate3d("+c+","+d+",0px)":"translate("+c+","+d+")"):b=this.attributes.position;var f={};return f[b]=a,f},updatePosition:function(a){var b=this.makePositionStyle(a);this.$list.css(b)},update:function(){this.updateLength(),this.canScroll()||this.initPosition()},eventName:function(a){if("string"!=typeof a||""===a)return"."+b;a=a.split(" ");for(var c=a.length,d=0;c>d;d++)a[d]=a[d]+"."+b;return a.join(" ")},eventNameWithId:function(a){if("string"!=typeof a||""===a)return this.options.namespace+"-"+this.instanceId;a=a.split(" ");for(var b=a.length,c=0;b>c;c++)a[c]=a[c]+"."+this.options.namespace+"-"+this.instanceId;return a.join(" ")},_trigger:function(a){var c=Array.prototype.slice.call(arguments,1),d=[this].concat(c);this.$element.trigger(b+"::"+a,d),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var e="on"+a;"function"==typeof this.options[e]&&this.options[e].apply(this,c)},throttle:function(a,b){var c,d,e,f=Date.now||function(){return(new Date).getTime()},g=null,h=0,i=function(){h=f(),g=null,e=a.apply(c,d),c=d=null};return function(){var j=f(),k=b-(j-h);return c=this,d=arguments,0>=k?(clearTimeout(g),g=null,h=j,e=a.apply(c,d),c=d=null):g||(g=setTimeout(i,k)),e}},enable:function(){this.disabled&&(this.disabled=!1,this.$element.removeClass(this.classes.disabled),this.bindEvents())},disable:function(){this.disabled!==!0&&(this.disabled=!0,this.initPosition(),this.$element.addClass(this.classes.disabled),this.unbindEvents())},destory:function(){this.$element.removeClass(this.classes.disabled),this.unbindEvents(),this.$element.data(b,null),this._trigger("destory")}},a.fn[b]=function(c){if("string"!=typeof c)return this.each(function(){a.data(this,b)||a.data(this,b,new d(this,c))});var e=c,f=Array.prototype.slice.call(arguments,1);if(/^\_/.test(e))return!1;if(!/^(get)/.test(e))return this.each(function(){var c=a.data(this,b);c&&"function"==typeof c[e]&&c[e].apply(c,f)});var g=this.first().data(b);return g&&"function"==typeof g[e]?g[e].apply(g,f):void 0}}(jQuery);